{% load i18n %}
{% load lang %}

<div class="language-switcher">
    <div class="relative" x-data="{ open: false }">
        <button @click="open = !open" 
                class="flex items-center px-3 py-2 text-sm font-medium text-white hover:text-green-100 border border-green-400 rounded-md">
            {% get_current_language_name %}
            <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
        </button>
        
        <div x-show="open" @click.away="open = false" x-transition
             class="absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg py-1 z-50">
             
            <form method="post" action="{% url 'set_language' %}">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                
                {% for code, name in available_languages %}
                    <button type="submit" name="language" value="{{ code }}"
                            class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 
                                   {% if code == current_language %}bg-green-50 text-green-700 font-medium{% endif %}">
                        {{ name }}
                    </button>
                {% endfor %}
            </form>
        </div>
    </div>
</div>
